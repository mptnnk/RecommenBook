<div class="container">
  <h4 class="page-title">本の詳細</h4>
  <div class="row">
    <%= render 'show', book: @book %>
  </div>
  <div class="row mt-3">
    <div class="col-md-4">
      <%= link_to "レビューを投稿する", new_book_review_path(@book.isbn), class:"btn btn-success" %>
      <%= unless @favorite_book %>
        <%= button_to 'お気に入りの本に登録する', books_favorite_path(@book.isbn), method: :post, class:"btn btn-primary" %>
      <% end %>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-8 mt-3">
      <% Review.where(isbn: @book.isbn).each do |review| %>
      <table class="table">
        <tr>
          <th>投稿者</th>
          <td><%= review.user.name %></td>
        </tr>
        <tr>
          <th>レビュー内容</th>
          <td><%= review.content %></td>
        </tr>
        <tr>
          <th>読み終わった日</th>
          <td><%= review.readed_at&.strftime("%Y/%m/%d") %></td>
          <!--「&.」は、nilの場合はnil、そうでない場合はメソッドを呼び出す-->
        </tr>
      </table>
      <% end %>
    </div>
  </div>
</div>
