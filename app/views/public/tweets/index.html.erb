<!--tweetの一覧-->
<!--条件分岐確認済み-->
<div class="container-fluid">
  <div class="row flex-row">
    <% if params[:user_name] %>
      <div class="col-lg-3 d-none d-lg-block">
        <%= render 'public/partial/userinfo', user: @user, book: @book, reading_lists: @reading_lists, readed_lists_count: @readed_lists_count, recommenbook: @recommenbook, in_release_reviews: @in_release_reviews %>
      </div>
    <% end %>
    
    <div class="col-lg-8 col-md-10 offset-md-1 col-sm-12">
      <h4 class="page-title">
        <% if user_signed_in? %>
          <% if params[:user_name].present? && params[:user_name] == current_user.name %>
            あなたのつぶやき
          <% elsif params[:user_name].present? && params[:user_name] != current_user.name %>
            <%= @user.name %>さんのつぶやき
          <% elsif params[:book_id].present? %>
            <%= @book['title'].truncate(20) %>のつぶやき
          <% else %>
            つぶやき
          <% end %>
          
        <% elsif !user_signed_in? %>
          <% if params[:user_name].present? %>
            <%= @user.name %>さんのつぶやき
          <% elsif params[:book_id].present? %>
            <%= @book['title'].truncate(20) %>のつぶやき
          <% else %>
            つぶやき
          <% end %>
        <% end %>
      </h4>
      
      <h3 class="text-right">
        <%= link_to new_tweet_path do %>
          <i class="fa-solid fa-pen-to-square"></i>
        <% end %>
      </h3>
      
        <% if user_signed_in? %>
        
          <% if params[:user_name].present? && params[:user_name] == current_user.name %>
          
            <% if @my_tweets.present? %>
              <%= render 'public/partial/lists', objects: @my_tweets %>
              <%= paginate @my_tweets, theme: 'twitter-bootstrap-4' %>
            <% else %>
              <p>つぶやきがありません</p>
            <% end %>
            
          <% elsif params[:user_name].present? && params[:user_name].to_i != current_user.name %>
          
            <% if @user_tweets.present? %>
              <%= render 'public/partial/lists', objects: @user_tweets %>
              <%= paginate @user_tweets, theme: 'twitter-bootstrap-4' %>
            <% else %>
              <p>つぶやきがありません</p>
            <% end %>
            
          <% elsif params[:book_id].present? %>
            <%if @book_tweets.present? %>
              <%= render 'public/partial/lists', objects: @book_tweets %>
              <%= paginate @book_tweets, theme: 'twitter-bootstrap-4' %>
            <% else %>
              <p>つぶやきがありません</p>
            <% end %>
          
          <% elsif params[:user_name].blank? && params[:book_id].blank? %>
            
            <% if @tweets.present? %>
              <%= render 'public/partial/lists', objects: @tweets %>
              <%= paginate @tweets, theme: 'twitter-bootstrap-4'%>
            <% else %>
              <p>つぶやきがありません</p>
            <% end %>
            
          <% end %>
          
        <% elsif !user_signed_in? %>
        
          <% if params[:user_name].present? %>
            
            <% if @user_tweets.present? %>
              <%= render 'public/partial/lists', objects: @user_tweets %>
              <%= paginate @user_tweets, theme: 'twitter-bootstrap-4' %>
            <% else %>
              <p>つぶやきがありません</p>
            <% end %>
              
          <% elsif params[:book_id].present? %>

            <%= render 'public/partial/lists', objects: @book_tweets %>
            <%= paginate @book_tweets, theme: 'twitter-bootstrap-4' %>
          
          <% else %>
          
            <% if @tweets.present? %>
              <%= render 'public/partial/lists', objects: @tweets %>
              <%= paginate @tweets, theme: 'twitter-bootstrap-4'%>
            <% else %>
              <p>つぶやきがありません</p>
            <% end %>
            
          <% end %>
        
        <% end %>
        
    </div>
  </div>
</div>