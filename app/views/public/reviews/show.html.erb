<!--レビュー詳細画面-->
<div class="container">
  <div class="row">
    <%= render 'public/books/show', book: @book, book_favorites: @book_favorites %>
  </div>
  <h4 class="page-title mt-3">レビュー詳細</h4>
  <div class="row">
    <div class="col">
      <table class="table table-borderless">
        <tr>
          <th style="width: 10%">投稿者</th>
          <td>
            <%= link_to mypage_path(name: @review.user.name) do %>
              <%= @review.user.name %>
            <% end %>
          </td>
          <th>投稿日</th>
          <td><%= @review.created_at.strftime('%Y/%m/%d') %></td>
          <th style="width: 20%">読み終わった日</th>
          <td><%= @review.readed_at&.strftime("%Y/%m/%d") %></td>
        </tr>
        <tr>
          <th>レビュー</th>
          <td colspan="5"><%= render_review_with_hashtags(@review.content) %></td>
        </tr>
        <tr>
          <th></th>
          <% if user_signed_in? %>
            <td class=<%= "like-" + @review.id.to_s %> >
              <%= render "public/likes/reviewbtn", review: @review %>
            </td>
          <% else %>
            <td><i class="fas fa-heart" aria-hidden="true" style="color: red;"></i><%= @review.likes.count %>いいね</td>
          <% end %>
          <td>
            <% if @review.user == current_user %>
              <%= link_to "編集する", edit_review_path(@review.id), class:"btn btn-primary btn-sm"%>
              <%= link_to "削除する", review_path(@review.id), method: :delete, "data-confirm" => "レビューを削除しますか？", class:"btn btn-danger btn-sm" %>
            <% end %>
          </td>
        </tr>
      </table>
      
      <div class="review-comments-index">
        <%= render "public/partial/comments", review: @review, comments: @comments %>
      </div>
      <% if user_signed_in? %>
        <%= render "public/review_comments/form", review: @review, review_comment: @review_comment %>
      <% end %>
      
    </div>
  </div>
</div>